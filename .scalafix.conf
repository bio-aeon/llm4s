rules = [
  DisableSyntax
]

DisableSyntax {
  // Syntactic regex checks; no SemanticDB required
  regex = [
    {
      id = NoSysEnv
      pattern = "\\bsys\\.env\\b"
      message = "use ConfigReader"
    },
    {
      id = NoSystemGetenv
      pattern = "\\bSystem\\.getenv\\b"
      message = "use ConfigReader"
    },
    {
      id = NoKeywordTry
      # Forbid the try {...} keyword form; allow scala.util.Try(...)
      pattern = "(?s)\\btry\\s*\\{"
      message = "Prefer scala.util.Try(...).toResult â€” import org.llm4s.types.TryOps"
    },
    {
      id = NoKeywordCatch
      pattern = "(?s)\\bcatch\\s*\\{"
      message = "Prefer mapping Result errors instead of catch; use Try(...).toResult and .left.map/.fold"
    },
    {
      id = NoKeywordFinally
      pattern = "(?s)\\bfinally\\b"
      message = "Prefer ManagedResource/Using or ensure cleanup via dedicated combinators"
    }
  ]
}
